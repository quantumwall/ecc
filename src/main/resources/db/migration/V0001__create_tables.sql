CREATE TABLE IF NOT EXISTS users
(
	id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	name VARCHAR(128) NOT NULL,
	email VARCHAR(64) NOT NULL UNIQUE,
	password VARCHAR(128) NOT NULL,
	balance DECIMAL  DEFAULT 0.0,
	currency CHAR(3) NOT NULL,
	active BOOLEAN NOT NULL DEFAULT TRUE
);

CREATE TABLE IF NOT EXISTS transaction
(
	id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	amount DECIMAL DEFAULT 0.0,
	type VARCHAR(16) NOT NULL,
	description TEXT,
	user_id BIGINT NOT NULL REFERENCES users
);

CREATE TABLE IF NOT EXISTS roles 
(
	id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	name VARCHAR(32) NOT NULL UNIQUE
);

CREATE TABLE IF NOT EXISTS roles_users
(
	user_id BIGINT NOT NULL REFERENCES users,
	role_id INTEGER NOT NULL REFERENCES roles
);

--INSERT INTO roles (name)
--VALUES	('ROLE_USER'),
--		('ROLE_ADMIN');

